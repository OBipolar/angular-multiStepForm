<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <h2><span class="glyphicon glyphicon-user"></span> User Management</h2>
  <ul class="list-group">
    <li class="list-group-item" ng-repeat="user in users">
        <strong>{{user.name}}</strong><br>
        <span class="text-muted">{{user.email}}</span>
        <a ng-click="deleteUser(user)" class="trash"><span class="glyphicon glyphicon-trash pull-right"></span></a>
    </li>
  </ul>

<hr>

<h2><span class="glyphicon glyphicon-th-list"></span> Database Management</h2>
    <div ng-repeat="data in tree" ng-include="'tree_item_renderer_top.html'"></div>
    {{tree}}
<hr>
</div>

<script type="text/ng-template"  id="tree_item_renderer_top.html">

    <div class="well" ng-init="refresh(data)">

    <div>
        <div class="input-group">
            <span class="input-group-addon">Question</span>
            <input type="text" class="form-control" ng-model="question" ng-change="questionValue(data)" placeholder="Add your question here">
        </div>
        <br>
        <div class="input-group">
            <span class="input-group-addon">Tip</span>
            <input type="text" class="form-control" ng-model="tip" ng-change="tipValue(data)" placeholder="Add your tip here">
        </div>
        <br>
    </div>

    <button ng-click="add(data)">Add Option</button>
    <button ng-click="delete(data)" ng-show="data.options.length > 0">Delete Options</button>
    <br>
    <br>
    <ul>
        <li ng-repeat="data in data.options" ng-include="'tree_item_renderer.html'"></li>
    </ul>
</div>
</script>

<script type="text/ng-template"  id="tree_item_renderer.html">

    <div class="well" ng-init="refresh(data)">

    <div>
        <div class="input-group">
            <span class="input-group-addon">Content</span>
            <input type="text" class="form-control" ng-model="content" ng-change="contentValue(data)" placeholder="Add your content here">
        </div>
        <br>

        <div ng-show="showAnswer" ng-include="'tree_item_answer.html'"></div>

    </div>

    <button ng-click="answer()" ng-show="!showAnswer">Answer</button>
    <button ng-click="next()" ng-show="showAnswer">Next</button>
    <button ng-click="add(data)" ng-show="!showAnswer">Add Option</button>
    <button ng-click="delete(data)" ng-show="data.options.length > 0">Delete Options</button>
    <br>
    <ul>
        <li ng-repeat="data in data.options" ng-include="'tree_item_renderer.html'"></li>
    </ul>
</div>
</script>

<script type="text/ng-template" id="tree_item_next.html">
    <div class="input-group">
            <span class="input-group-addon">Question</span>
            <input type="text" class="form-control" ng-model="question" placeholder="Add your question here">
        </div>
        <br>
        <div class="input-group">
            <span class="input-group-addon">Tip</span>
            <input type="text" class="form-control" ng-model="tip" placeholder="Add your tip here">
        </div>
        <br>

</script>


<script type="text/ng-template" id="tree_item_answer.html">
        <div class="input-group">
            <span class="input-group-addon">Answer</span>
            <input type="text" class="form-control" ng-model="answer" ng-change="answerValue(data)" placeholder="Add your answer here">
        </div>
        <br>
</script>
